<div class="container my-4">
  <!-- Header -->
  <div class="d-flex flex-column flex-md-row justify-content-between align-items-start mb-3">
    <div>
      <h2><i class="bi bi-file-earmark-text"></i> Scan Report: {{ log.applicationName }}</h2>
      <p class="log-date mb-0">
        <strong>Date:</strong> {{ log.timestamp | date:'dd/MM/yyyy, hh:mm a' }}</p>
    </div>

    <!-- Control Buttons -->
    <div class="mt-2 mt-md-0 d-flex gap-2 flex-wrap">
      <button class="btn btn-secondary" (click)="goBack()"><i class="bi bi-arrow-left"></i> Back</button>
      <button class="btn btn-success" (click)="downloadLog()"><i class="bi bi-download"></i> Download</button>
      <button class="btn btn-primary" (click)="sendEmail()"><i class="bi bi-envelope"></i> Email</button>
      <button class="btn btn-warning" (click)="printLog()"><i class="bi bi-printer"></i> Print</button>
    </div>
  </div>

  <!-- Main Log Content -->
  <div class="log-card p-4 rounded shadow-sm bg-white">
    <!-- Execution Summary -->
    <section class="mb-4">
      <h4><i class="bi bi-clipboard-check"></i> Execution Summary</h4>
      <ul class="list-group list-group-flush">
        <li class="list-group-item d-flex justify-content-between">
          <span>Status</span>
          <span [ngClass]="{'text-success': log.content.status==='success', 'text-danger': log.content.status==='failed'}">
            {{ log.content.status | titlecase }}
          </span>
        </li>
        <li class="list-group-item d-flex justify-content-between">
          <span>Duration</span>
          <span>{{ log.content.duration }} seconds</span>
        </li>
        <li class="list-group-item d-flex justify-content-between">
          <span>Scanner Type</span>
          <span>{{ log.content.scannerType }}</span>
        </li>
      </ul>
    </section>

    <!-- SonarQube Results -->
    <section class="mb-4">
      <h4><i class="bi bi-graph-up"></i> SonarQube Results</h4>
      <ul class="list-group list-group-flush" *ngIf="log.content.sonarResults; else noSonar">
        <li class="list-group-item d-flex justify-content-between"><span>Quality Gate</span><span>{{ log.content.sonarResults.qualityGate }}</span></li>
        <li class="list-group-item d-flex justify-content-between"><span>Coverage</span><span>{{ log.content.sonarResults.coverage }}%</span></li>
        <li class="list-group-item d-flex justify-content-between"><span>Bugs</span><span>{{ log.content.sonarResults.bugs }}</span></li>
        <li class="list-group-item d-flex justify-content-between"><span>Vulnerabilities</span><span>{{ log.content.sonarResults.vulnerabilities }}</span></li>
        <li class="list-group-item d-flex justify-content-between"><span>Code Smells</span><span>{{ log.content.sonarResults.codeSmells }}</span></li>
      </ul>
      <ng-template #noSonar>
        <p class="text-muted">No SonarQube results available.</p>
      </ng-template>
    </section>

    <!-- Details -->
    <section class="mb-4">
      <h4><i class="bi bi-list-ul"></i> Details</h4>
      <ul class="list-group list-group-flush">
        <li class="list-group-item" *ngFor="let d of log.content.details">{{ d }}</li>
      </ul>
    </section>

    <!-- Warnings -->
    <section class="mb-4" *ngIf="log.content.warnings?.length">
      <h4><i class="bi bi-exclamation-triangle text-warning"></i> Warnings</h4>
      <ul class="list-group list-group-flush">
        <li class="list-group-item" *ngFor="let w of log.content.warnings">{{ w }}</li>
      </ul>
    </section>

    <!-- Errors -->
    <section class="mb-4" *ngIf="log.content.errors?.length">
      <h4><i class="bi bi-bug text-danger"></i> Errors</h4>
      <ul class="list-group list-group-flush">
        <li class="list-group-item text-danger" *ngFor="let e of log.content.errors">{{ e }}</li>
      </ul>
    </section>
  </div>
</div>
